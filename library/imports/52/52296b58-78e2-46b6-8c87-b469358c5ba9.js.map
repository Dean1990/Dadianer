{"version":3,"sources":["../../../../assets/script/assets/script/Game.js"],"names":["com","require","lang","cc","Class","extends","Component","properties","player","default","type","Prefab","paiAn","Sprite","gameLabel","Label","restartBtnLabel","a1","a2","a3","a5","a10","a11","a12","a13","b1","b2","b3","b5","b11","b12","b13","c1","c2","c3","c5","c10","c11","c12","c13","d1","d2","d3","d5","d11","d12","d13","E0","E1","onLoad","init","string","restart","startGame","self","pais","Array","b10","d10","sort","Math","random","pp","players","j","playerNum","node","instantiate","getComponent","shouPai","currentTag","setVisible","push","partyPlayers","i","paiNum","sprite","shift","_name","setFirstPlayer","substring","winPlayer","isAI","size","winSize","node1","director","getScene","addChild","setPosition","p","width","height","node2","node3","_currentPlayer","rounds","toggle","exit","game","end","_lastPai"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/script","sourcesContent":["var com = require('Common');\nvar lang = require('Language');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        player:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        paiAn:{\n            default:null,\n            type:cc.Sprite,\n        },\n\n        gameLabel:{\n            default:null,\n            type:cc.Label,\n        },\n\n        restartBtnLabel:{\n            default:null,\n            type:cc.Label,\n        },\n\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n\n        a1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a10:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        b1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        // b10:{\n        //     default:null,\n        //     type:cc.Prefab,\n        // },\n        b11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        c1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c10:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        d1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        // d10:{\n        //     default:null,\n        //     type:cc.Prefab,\n        // },\n        d11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        E0:{\n            default:null,\n            type:cc.Prefab,\n        },\n        E1:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n\n        \n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        this.init();\n\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n\n    init:function () {\n\n        lang.init();\n\n        this.restartBtnLabel.string = com.lang.restart;\n\n        this.startGame();\n\n    },\n\n    startGame:function(){\n        var self = this;\n\n        var pais = new Array(self.a1,self.a2,self.a3,self.a5,self.a10,self.a11,self.a12,self.a13,self.b1,self.b2,self.b3,self.b5,self.b10,self.b11,self.b12,self.b13,self.c1,self.c2,self.c3,self.c5,self.c10,self.c11,self.c12,self.c13,self.d1,self.d2,self.d3,self.d5,self.d10,self.d11,self.d12,self.d13,self.E0,self.E1);\n\n        //打乱数组\n        pais.sort(function(){\n\n            return 0.5 - Math.random();\n\n        });\n\n        var pp = new Array();\n\n        com.players = new Array();\n\n        for(var j = 0;j<com.playerNum;j++){\n\n            var node = cc.instantiate(this.player);\n\n            node.getComponent('Player').shouPai = new Array();\n\n            node.getComponent('Player').currentTag.setVisible(false);\n\n            com.players.push(node.getComponent('Player'));\n\n        }\n\n        //初始化同一伙数组\n        com.partyPlayers = new Array();\n\n        for(var i = 0;i<com.paiNum;i++){\n\n            var j = i%com.playerNum;\n\n            var sprite = cc.instantiate(pais.shift());\n\n            com.players[j].shouPai.push(sprite);\n\n            if(sprite._name == \"a11\"){\n\n                com.setFirstPlayer(j);\n\n            }\n\n            if(sprite._name.substring(0,1)==\"E\"){\n                //记录大小鬼同一伙\n                com.partyPlayers.push(j);\n\n            }\n\n        }\n\n\n        //初始化胜利者数组\n        com.winPlayer = new Array();\n        \n\n        com.players[0].isAI = false;\n        com.players[1].isAI = true;\n        com.players[2].isAI = true;\n        com.players[3].isAI = true;\n\n        //设置玩家位置\n        var size = cc.winSize;\n\n        var node1 = com.players[1].node;\n\n        cc.director.getScene().addChild(node1);\n\n        node1.setPosition(cc.p(size.width-(node1.width/3*2),size.height/3*2));\n\n        var node2 = com.players[2].node;\n\n        cc.director.getScene().addChild(node2);\n\n        node2.setPosition(cc.p(size.width/2,size.height - (node2.height/3*2)));\n\n        var node3 = com.players[3].node;\n\n        cc.director.getScene().addChild(node3);\n\n        node3.setPosition(cc.p((node3.width/3*2),size.height/3*2));\n\n        //cc.log(com.players[0]);\n\n        self.paiAn.getComponent('PaiAn').player = com.players[0];\n\n        //如果是机器人，指定出牌\n        if(com._currentPlayer!=0 && com.players[com._currentPlayer].isAI){\n\n            com.rounds = 1;\n\n            com.players[com._currentPlayer].toggle();\n\n        }\n\n        // for(var n = 0;n<pp.length;n++){\n\n        //     self.player0.getComponent('Player').ShouPai = pp[0];\n\n        // }\n    },\n\n    exit:function(){\n\n        cc.game.end();\n\n    },\n\n    restart:function(){\n\n        this.startGame();\n\n        com._lastPai = null\n\n        cc.game.restart();\n\n    },\n\n});\n"]}