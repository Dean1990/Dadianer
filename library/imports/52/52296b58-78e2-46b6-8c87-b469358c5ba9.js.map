{"version":3,"sources":["../../../../assets/script/assets/script/Game.js"],"names":["com","require","cc","Class","extends","Component","properties","player","default","type","Prefab","paiAn","Sprite","gameLabel","Label","a1","a2","a3","a5","a10","a11","a12","a13","b1","b2","b3","b5","b11","b12","b13","c1","c2","c3","c5","c10","c11","c12","c13","d1","d2","d3","d5","d11","d12","d13","E0","E1","onLoad","init","startGame","self","pais","Array","b10","d10","sort","Math","random","pp","players","j","playerNum","node","instantiate","getComponent","shouPai","currentTag","setVisible","push","partyPlayers","i","paiNum","sprite","shift","_name","setFirstPlayer","substring","winPlayer","isAI","size","winSize","node1","director","getScene","addChild","setPosition","p","width","height","node2","node3","_currentPlayer","rounds","toggle","exit","game","end","restart","_lastPai"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,QAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,gBAAO;AACHC,qBAAQ,IADL;AAEHC,kBAAKP,GAAGQ;AAFL,SAFC;;AAORC,eAAM;AACFH,qBAAQ,IADN;AAEFC,kBAAKP,GAAGU;AAFN,SAPE;;AAYRC,mBAAU;AACNL,qBAAQ,IADF;AAENC,kBAAKP,GAAGY;AAFF,SAZF;;AAiBR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,YAAG;AACCP,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA5BK;AAgCRM,YAAG;AACCR,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAhCK;AAoCRO,YAAG;AACCT,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SApCK;AAwCRQ,YAAG;AACCV,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAxCK;AA4CRS,aAAI;AACAX,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SA5CI;AAgDRU,aAAI;AACAZ,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAhDI;AAoDRW,aAAI;AACAb,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SApDI;AAwDRY,aAAI;AACAd,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAxDI;;AA6DRa,YAAG;AACCf,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA7DK;AAiERc,YAAG;AACChB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAjEK;AAqERe,YAAG;AACCjB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SArEK;AAyERgB,YAAG;AACClB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAzEK;AA6ER;AACA;AACA;AACA;AACAiB,aAAI;AACAnB,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAjFI;AAqFRkB,aAAI;AACApB,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SArFI;AAyFRmB,aAAI;AACArB,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAzFI;;AA8FRoB,YAAG;AACCtB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA9FK;AAkGRqB,YAAG;AACCvB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAlGK;AAsGRsB,YAAG;AACCxB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAtGK;AA0GRuB,YAAG;AACCzB,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA1GK;AA8GRwB,aAAI;AACA1B,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SA9GI;AAkHRyB,aAAI;AACA3B,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAlHI;AAsHR0B,aAAI;AACA5B,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAtHI;AA0HR2B,aAAI;AACA7B,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SA1HI;;AA+HR4B,YAAG;AACC9B,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA/HK;AAmIR6B,YAAG;AACC/B,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAnIK;AAuIR8B,YAAG;AACChC,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAvIK;AA2IR+B,YAAG;AACCjC,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SA3IK;AA+IR;AACA;AACA;AACA;AACAgC,aAAI;AACAlC,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAnJI;AAuJRiC,aAAI;AACAnC,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SAvJI;AA2JRkC,aAAI;AACApC,qBAAQ,IADR;AAEAC,kBAAKP,GAAGQ;AAFR,SA3JI;;AAgKRmC,YAAG;AACCrC,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT,SAhKK;AAoKRoC,YAAG;AACCtC,qBAAQ,IADT;AAECC,kBAAKP,GAAGQ;AAFT;;AApKK,KAHP;;AAgLL;AACAqC,YAAQ,kBAAY;;AAEhB,aAAKC,IAAL;AAEH,KArLI;;AAuLL;AACA;;AAEA;;AAEAA,UAAK,gBAAY;;AAEb,aAAKC,SAAL;AAEH,KAhMI;;AAkMLA,eAAU,qBAAU;AAChB,YAAIC,OAAO,IAAX;;AAEA,YAAIC,OAAO,IAAIC,KAAJ,CAAUF,KAAKnC,EAAf,EAAkBmC,KAAKlC,EAAvB,EAA0BkC,KAAKjC,EAA/B,EAAkCiC,KAAKhC,EAAvC,EAA0CgC,KAAK/B,GAA/C,EAAmD+B,KAAK9B,GAAxD,EAA4D8B,KAAK7B,GAAjE,EAAqE6B,KAAK5B,GAA1E,EAA8E4B,KAAK3B,EAAnF,EAAsF2B,KAAK1B,EAA3F,EAA8F0B,KAAKzB,EAAnG,EAAsGyB,KAAKxB,EAA3G,EAA8GwB,KAAKG,GAAnH,EAAuHH,KAAKvB,GAA5H,EAAgIuB,KAAKtB,GAArI,EAAyIsB,KAAKrB,GAA9I,EAAkJqB,KAAKpB,EAAvJ,EAA0JoB,KAAKnB,EAA/J,EAAkKmB,KAAKlB,EAAvK,EAA0KkB,KAAKjB,EAA/K,EAAkLiB,KAAKhB,GAAvL,EAA2LgB,KAAKf,GAAhM,EAAoMe,KAAKd,GAAzM,EAA6Mc,KAAKb,GAAlN,EAAsNa,KAAKZ,EAA3N,EAA8NY,KAAKX,EAAnO,EAAsOW,KAAKV,EAA3O,EAA8OU,KAAKT,EAAnP,EAAsPS,KAAKI,GAA3P,EAA+PJ,KAAKR,GAApQ,EAAwQQ,KAAKP,GAA7Q,EAAiRO,KAAKN,GAAtR,EAA0RM,KAAKL,EAA/R,EAAkSK,KAAKJ,EAAvS,CAAX;;AAEA;AACAK,aAAKI,IAAL,CAAU,YAAU;;AAEhB,mBAAO,MAAMC,KAAKC,MAAL,EAAb;AAEH,SAJD;;AAMA,YAAIC,KAAK,IAAIN,KAAJ,EAAT;;AAEApD,YAAI2D,OAAJ,GAAc,IAAIP,KAAJ,EAAd;;AAEA,aAAI,IAAIQ,IAAI,CAAZ,EAAcA,IAAE5D,IAAI6D,SAApB,EAA8BD,GAA9B,EAAkC;;AAE9B,gBAAIE,OAAO5D,GAAG6D,WAAH,CAAe,KAAKxD,MAApB,CAAX;;AAEAuD,iBAAKE,YAAL,CAAkB,QAAlB,EAA4BC,OAA5B,GAAsC,IAAIb,KAAJ,EAAtC;;AAEAU,iBAAKE,YAAL,CAAkB,QAAlB,EAA4BE,UAA5B,CAAuCC,UAAvC,CAAkD,KAAlD;;AAEAnE,gBAAI2D,OAAJ,CAAYS,IAAZ,CAAiBN,KAAKE,YAAL,CAAkB,QAAlB,CAAjB;AAEH;;AAED;AACAhE,YAAIqE,YAAJ,GAAmB,IAAIjB,KAAJ,EAAnB;;AAEA,aAAI,IAAIkB,IAAI,CAAZ,EAAcA,IAAEtE,IAAIuE,MAApB,EAA2BD,GAA3B,EAA+B;;AAE3B,gBAAIV,IAAIU,IAAEtE,IAAI6D,SAAd;;AAEA,gBAAIW,SAAStE,GAAG6D,WAAH,CAAeZ,KAAKsB,KAAL,EAAf,CAAb;;AAEAzE,gBAAI2D,OAAJ,CAAYC,CAAZ,EAAeK,OAAf,CAAuBG,IAAvB,CAA4BI,MAA5B;;AAEA,gBAAGA,OAAOE,KAAP,IAAgB,KAAnB,EAAyB;;AAErB1E,oBAAI2E,cAAJ,CAAmBf,CAAnB;AAEH;;AAED,gBAAGY,OAAOE,KAAP,CAAaE,SAAb,CAAuB,CAAvB,EAAyB,CAAzB,KAA6B,GAAhC,EAAoC;AAChC;AACA5E,oBAAIqE,YAAJ,CAAiBD,IAAjB,CAAsBR,CAAtB;AAEH;AAEJ;;AAGD;AACA5D,YAAI6E,SAAJ,GAAgB,IAAIzB,KAAJ,EAAhB;;AAGApD,YAAI2D,OAAJ,CAAY,CAAZ,EAAemB,IAAf,GAAsB,KAAtB;AACA9E,YAAI2D,OAAJ,CAAY,CAAZ,EAAemB,IAAf,GAAsB,IAAtB;AACA9E,YAAI2D,OAAJ,CAAY,CAAZ,EAAemB,IAAf,GAAsB,IAAtB;AACA9E,YAAI2D,OAAJ,CAAY,CAAZ,EAAemB,IAAf,GAAsB,IAAtB;;AAEA;AACA,YAAIC,OAAO7E,GAAG8E,OAAd;;AAEA,YAAIC,QAAQjF,IAAI2D,OAAJ,CAAY,CAAZ,EAAeG,IAA3B;;AAEA5D,WAAGgF,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCH,KAAhC;;AAEAA,cAAMI,WAAN,CAAkBnF,GAAGoF,CAAH,CAAKP,KAAKQ,KAAL,GAAYN,MAAMM,KAAN,GAAY,CAAZ,GAAc,CAA/B,EAAkCR,KAAKS,MAAL,GAAY,CAAZ,GAAc,CAAhD,CAAlB;;AAEA,YAAIC,QAAQzF,IAAI2D,OAAJ,CAAY,CAAZ,EAAeG,IAA3B;;AAEA5D,WAAGgF,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCK,KAAhC;;AAEAA,cAAMJ,WAAN,CAAkBnF,GAAGoF,CAAH,CAAKP,KAAKQ,KAAL,GAAW,CAAhB,EAAkBR,KAAKS,MAAL,GAAeC,MAAMD,MAAN,GAAa,CAAb,GAAe,CAAhD,CAAlB;;AAEA,YAAIE,QAAQ1F,IAAI2D,OAAJ,CAAY,CAAZ,EAAeG,IAA3B;;AAEA5D,WAAGgF,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCM,KAAhC;;AAEAA,cAAML,WAAN,CAAkBnF,GAAGoF,CAAH,CAAMI,MAAMH,KAAN,GAAY,CAAZ,GAAc,CAApB,EAAuBR,KAAKS,MAAL,GAAY,CAAZ,GAAc,CAArC,CAAlB;;AAEA;;AAEAtC,aAAKvC,KAAL,CAAWqD,YAAX,CAAwB,OAAxB,EAAiCzD,MAAjC,GAA0CP,IAAI2D,OAAJ,CAAY,CAAZ,CAA1C;;AAEA;AACA,YAAG3D,IAAI2F,cAAJ,IAAoB,CAApB,IAAyB3F,IAAI2D,OAAJ,CAAY3D,IAAI2F,cAAhB,EAAgCb,IAA5D,EAAiE;;AAE7D9E,gBAAI4F,MAAJ,GAAa,CAAb;;AAEA5F,gBAAI2D,OAAJ,CAAY3D,IAAI2F,cAAhB,EAAgCE,MAAhC;AAEH;;AAED;;AAEA;;AAEA;AACH,KAxSI;;AA0SLC,UAAK,gBAAU;;AAEX5F,WAAG6F,IAAH,CAAQC,GAAR;AAEH,KA9SI;;AAgTLC,aAAQ,mBAAU;;AAEd,aAAKhD,SAAL;;AAEAjD,YAAIkG,QAAJ,GAAe,IAAf;;AAEAhG,WAAG6F,IAAH,CAAQE,OAAR;AAEH;;AAxTI,CAAT","file":"Game.js","sourceRoot":"../../../../assets/script","sourcesContent":["var com = require('Common');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        player:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        paiAn:{\n            default:null,\n            type:cc.Sprite,\n        },\n\n        gameLabel:{\n            default:null,\n            type:cc.Label,\n        },\n\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n\n        a1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a10:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        a13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        b1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        // b10:{\n        //     default:null,\n        //     type:cc.Prefab,\n        // },\n        b11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        b13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        c1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c10:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        c13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        d1:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d2:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d3:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d5:{\n            default:null,\n            type:cc.Prefab,\n        },\n        // d10:{\n        //     default:null,\n        //     type:cc.Prefab,\n        // },\n        d11:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d12:{\n            default:null,\n            type:cc.Prefab,\n        },\n        d13:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n        E0:{\n            default:null,\n            type:cc.Prefab,\n        },\n        E1:{\n            default:null,\n            type:cc.Prefab,\n        },\n\n\n        \n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        this.init();\n\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n\n    init:function () {\n\n        this.startGame();\n\n    },\n\n    startGame:function(){\n        var self = this;\n\n        var pais = new Array(self.a1,self.a2,self.a3,self.a5,self.a10,self.a11,self.a12,self.a13,self.b1,self.b2,self.b3,self.b5,self.b10,self.b11,self.b12,self.b13,self.c1,self.c2,self.c3,self.c5,self.c10,self.c11,self.c12,self.c13,self.d1,self.d2,self.d3,self.d5,self.d10,self.d11,self.d12,self.d13,self.E0,self.E1);\n\n        //打乱数组\n        pais.sort(function(){\n\n            return 0.5 - Math.random();\n\n        });\n\n        var pp = new Array();\n\n        com.players = new Array();\n\n        for(var j = 0;j<com.playerNum;j++){\n\n            var node = cc.instantiate(this.player);\n\n            node.getComponent('Player').shouPai = new Array();\n\n            node.getComponent('Player').currentTag.setVisible(false);\n\n            com.players.push(node.getComponent('Player'));\n\n        }\n\n        //初始化同一伙数组\n        com.partyPlayers = new Array();\n\n        for(var i = 0;i<com.paiNum;i++){\n\n            var j = i%com.playerNum;\n\n            var sprite = cc.instantiate(pais.shift());\n\n            com.players[j].shouPai.push(sprite);\n\n            if(sprite._name == \"a11\"){\n\n                com.setFirstPlayer(j);\n\n            }\n\n            if(sprite._name.substring(0,1)==\"E\"){\n                //记录大小鬼同一伙\n                com.partyPlayers.push(j);\n\n            }\n\n        }\n\n\n        //初始化胜利者数组\n        com.winPlayer = new Array();\n        \n\n        com.players[0].isAI = false;\n        com.players[1].isAI = true;\n        com.players[2].isAI = true;\n        com.players[3].isAI = true;\n\n        //设置玩家位置\n        var size = cc.winSize;\n\n        var node1 = com.players[1].node;\n\n        cc.director.getScene().addChild(node1);\n\n        node1.setPosition(cc.p(size.width-(node1.width/3*2),size.height/3*2));\n\n        var node2 = com.players[2].node;\n\n        cc.director.getScene().addChild(node2);\n\n        node2.setPosition(cc.p(size.width/2,size.height - (node2.height/3*2)));\n\n        var node3 = com.players[3].node;\n\n        cc.director.getScene().addChild(node3);\n\n        node3.setPosition(cc.p((node3.width/3*2),size.height/3*2));\n\n        //cc.log(com.players[0]);\n\n        self.paiAn.getComponent('PaiAn').player = com.players[0];\n\n        //如果是机器人，指定出牌\n        if(com._currentPlayer!=0 && com.players[com._currentPlayer].isAI){\n\n            com.rounds = 1;\n\n            com.players[com._currentPlayer].toggle();\n\n        }\n\n        // for(var n = 0;n<pp.length;n++){\n\n        //     self.player0.getComponent('Player').ShouPai = pp[0];\n\n        // }\n    },\n\n    exit:function(){\n\n        cc.game.end();\n\n    },\n\n    restart:function(){\n\n        this.startGame();\n\n        com._lastPai = null\n\n        cc.game.restart();\n\n    },\n\n});\n"]}