{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "module",
    "exports",
    "playerNum",
    "paiNum",
    "rounds",
    "players",
    "_lastPai",
    "_currentPlayer",
    "lastPlayerNum",
    "winPlayer",
    "partyPlayers",
    "isXuanZhan",
    "num",
    "setFirstPlayer",
    "firstPlayer",
    "currentTag",
    "setVisible",
    "checkNextPlayerNoWinner",
    "length",
    "indexOf",
    "nextPlayer",
    "lastPai",
    "message",
    "getWindNum",
    "mssage",
    "actionLabel",
    "string",
    "clearPaiZhuo",
    "showLastPai",
    "isPlayerWin",
    "shouPai",
    "push",
    "shouPaiNum",
    "party",
    "isGameOver",
    "winNumCondition",
    "i",
    "cc",
    "director",
    "getScene",
    "getChildByName",
    "toggle",
    "checkChuPai",
    "xuanPai",
    "p",
    "isCurrent",
    "composeCheck",
    "lastLength",
    "convertValueMore",
    "value",
    "arr",
    "_name",
    "substring",
    "isClown",
    "value2",
    "convertValue",
    "l",
    "convertClownValue",
    "weight",
    "f",
    "parseInt",
    "Math",
    "pow",
    "charCodeAt",
    "sortPai",
    "spriteArr",
    "j",
    "name1",
    "name2",
    "temp",
    "code1",
    "code2",
    "size",
    "winSize",
    "node",
    "addChild",
    "setPosition",
    "width",
    "height",
    "removeFromParent",
    "destroy",
    "checkEnableXuanZhan",
    "pNum",
    "isPlayerParty",
    "pNum2",
    "getWind",
    "note",
    "emit",
    "windPNum",
    "agreeGetWind",
    "isAgree",
    "voteGetWindNum"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "module.exports = {\n\n    playerNum : 4,//玩家数\n\n    paiNum : 32,//牌数\n\n    rounds:0,//回合数\n\n    players: null,//所有玩家的容器\n\n    _lastPai:null,//上家出的牌\n\n    //_firstPlayer:0,//第一个出牌的玩家\n\n    _currentPlayer:0,//当前出牌的玩家\n\n    //_buChuNum:0,//记录不出牌次数\n\n    lastPlayerNum:0,//最后出牌的玩家\n\n    winPlayer:null,//记录胜出者序号\n\n    partyPlayers:null,//记录同一伙可宣战的玩家数组\n\n    isXuanZhan:false,//是否宣战\n\n    num:0,//记数\n\n    //voteGetWindNum:0,//参于投票人数\n\n    setFirstPlayer:function(firstPlayer){\n\n        this._currentPlayer = firstPlayer;\n\n        this.players[this._currentPlayer].currentTag.setVisible(true);\n\n    },\n\n    /**\n     * 检查玩家，剔除胜出者，继续游戏\n     */\n    checkNextPlayerNoWinner:function(){\n\n        this.num = this.num +1;\n\n        //控制递归深度\n        if(this.winPlayer.length<this.playerNum){\n\n            if(this.num%this.playerNum==0){\n\n                this.rounds = this.rounds + 1;\n\n            }\n\n            this._currentPlayer = (this._currentPlayer+1) % this.playerNum;\n\n            if(this.winPlayer.indexOf(this._currentPlayer)!=-1){\n\n                this.checkNextPlayerNoWinner();\n\n            }\n\n        }\n        // cc.log(\"chekc player index:\"+this._currentPlayer);\n\n    },\n\n    /**\n     * 下一个玩家\n     */\n    nextPlayer:function(lastPai,message,getWindNum){\n\n            //设置默认值\n            getWindNum = getWindNum||-1;\n\n            //当前调用该函数的玩家部分\n            if(lastPai==null||lastPai.length==0){\n\n                // this._buChuNum = this._buChuNum + 1;\n                //不出\n                if(mssage==null){\n\n                    message = \"不出\";\n\n                }\n\n                this.players[this._currentPlayer].actionLabel.string = message;\n\n            }else {\n\n                // this._buChuNum = 0;\n                this.lastPlayerNum = this._currentPlayer;\n                //清理牌桌\n                this.clearPaiZhuo();\n                //赋值\n                this._lastPai = lastPai;\n                //展示\n                this.showLastPai();\n\n            }\n\n            this.players[this._currentPlayer].currentTag.setVisible(false);\n\n            var isPlayerWin = this.players[this._currentPlayer].shouPai.length == 0 && this.winPlayer.indexOf(this._currentPlayer)==-1;\n\n            if(isPlayerWin){\n\n                //cc.log(\"wp lenght:\"+this.winPlayer.length);\n\n                this.winPlayer.push(this._currentPlayer);\n\n                this.players[this._currentPlayer].shouPaiNum.string = \"\";\n\n                this.players[this._currentPlayer].actionLabel.string = \"NO. \"+this.winPlayer.length;\n\n                var party = this.partyPlayers.indexOf(this._currentPlayer)!=-1;\n\n                var isGameOver = party;\n                \n                //游戏结束 人数条件\n                var winNumCondition = party?this.partyPlayers.length:this.playerNum-this.partyPlayers.length;\n\n                if(this.winPlayer.length==winNumCondition){\n\n                    for(var i = 0;i<winNumCondition;i++){\n\n                        isGameOver = isGameOver^(this.partyPlayers.indexOf(this.winPlayer[i])!=-1);\n\n                    }\n\n                    if(isGameOver){\n\n                        //清理牌桌\n                        this.clearPaiZhuo();\n\n                        cc.director.getScene().getChildByName('GameLabel').string = \"游戏结束\"\n\n                        return;\n\n                    }\n\n                }\n\n            }\n\n            \n\n            //********** 当前调用该函数的玩家部分结束 ************\n\n            \n            //下一个玩家部分\n            //下一个合法的出牌者\n            //this._currentPlayer = (this._currentPlayer+1)%this.playerNum;\n            this.checkNextPlayerNoWinner();\n\n            //cc.log(this.players[this._currentPlayer]);\n    \n            this.players[this._currentPlayer].currentTag.setVisible(true);\n\n            this.players[this._currentPlayer].actionLabel.string = \"\";\n\n\n            //三个不出，说明又轮到上次出牌的玩家 当有胜出者后，判断的数字要减少\n            // if(this._buChuNum==(3-this.winPlayer.length)){\n            \n            if(this.lastPlayerNum==this._currentPlayer){\n\n                //清理牌桌\n                this.clearPaiZhuo();\n\n                this._lastPai = null;\n\n            }\n\n            \n\n            if(isPlayerWin){\n\n                //记录下一个要牌者，及要风者\n                getWindNum = this._currentPlayer;\n\n                //更新下一个出牌者+1\n                this.checkNextPlayerNoWinner();\n\n            }\n\n            //通知玩家可以出牌了\n            this.players[this._currentPlayer].toggle(getWindNum);\n\n        \n\n    },\n        \n    /**\n     * 检查出牌的合法性\n     */\n    checkChuPai:function(xuanPai,p){\n\n        var isCurrent = p==this._currentPlayer;\n\n        // isCurrent = true;\n\n        //是否该出牌\n        if(!isCurrent){\n\n            return false;\n        }\n\n        //判断选中的牌\n        if(xuanPai!=null){\n\n            if(this._lastPai==null || this._lastPai.length==0){\n\n                 return this.composeCheck(xuanPai);\n\n            }else {\n\n                var length = xuanPai.length;\n\n                var lastLength = this._lastPai.length;\n\n                if(lastLength==1){\n                    //单\n                    if(length == 1){\n\n                        return this.convertValueMore(xuanPai)>this.convertValueMore(this._lastPai);\n\n                    }else {\n                        //炸 大于1600为炸\n                        var value = this.convertValueMore(xuanPai);\n\n                        return value>1600 && value>this.convertValueMore(this._lastPai);\n\n                    }\n\n                }else if(lastLength >= 2 && lastLength < 5){\n                    //对\n                    if(length>=2){\n                        //可以出对，也可以出炸\n                        return this.convertValueMore(xuanPai)>this.convertValueMore(this._lastPai);\n\n                    }else {\n                        //不能出单\n                        return false;\n\n                    }\n\n                }\n\n                return false;\n\n            }\n\n        }\n\n        return false;\n\n    },\n\n    /**\n     * 组合检查\n     */\n    composeCheck:function(arr){\n\n        var length = arr.length;\n\n        if(length==1){\n\n            return true;\n        }else if(length<5){\n\n            var value = arr[0]._name.substring(1);\n\n            var isClown = false;\n\n            for(var i = 0;i<length;i++){\n                //鬼是一个特殊的组合\n                if(arr[i]._name.substring(0,1)==\"E\"){\n\n                    if(isClown){\n\n                        //只有两张 且都是鬼\n                        if(length ==2 ){\n\n                            return true;\n\n                        }else {\n\n                            return false;\n\n                        }\n                    }else {\n\n                        isClown = true;\n\n                    }\n                        \n\n                }else {\n                    //进到这里，这张牌不是大小鬼，出现不同权值 返回false\n                    if(isClown){\n\n                        return false;\n\n                    }\n\n                    var value2 = arr[i]._name.substring(1);\n\n                    if(value!=value2){\n\n                        return false;\n\n                    }\n\n                }\n\n            }\n\n            //如果到这里 isClown 为真，及有鬼存在，但多张牌只有一个鬼，说明牌组合不对\n            return !isClown;\n\n        }else {\n\n            return false;\n\n        }\n\n    },\n\n    /**\n     * 权值转换 \n     * 不包括大小鬼\n     */\n    convertValue:function(l){\n\n        if(l<4){\n\n            return (13+l)*10;\n\n        }else {\n\n            return l*10;\n\n        }\n\n    },\n\n    /**\n     * 大小鬼权值转换 \n     * \n     */\n    convertClownValue:function(l){\n        //大鬼 l = 0  小鬼 l=1\n        //小鬼要大于最大的单\n        return (13+3+2-l)*10;\n\n    },\n\n    /**\n     * 权值转换 多张\n     */\n    convertValueMore:function(arr){\n\n        var weight = 0;\n\n        if(arr==null || arr.length == 0 || !this.composeCheck(arr)){\n\n            return weight;\n\n        }else {\n\n            var f = arr[0]._name.substring(0,1);\n\n            var l = parseInt(arr[0]._name.substring(1));\n\n            if(f == \"E\"){\n                //鬼\n                weight = 13+3+2-l;\n                \n\n            }else {\n\n                if(l<4){\n\n                    weight = 13+l;\n\n                }else {\n\n                    weight = l;\n\n                }\n\n            }\n            //特例\n            if(arr.length==2){\n\n                if(l == 10){\n\n                    return 16*Math.pow(10,2)+1;//比对3大1\n\n                }else if(l == 5){\n\n                    var value = f.charCodeAt()+arr[1]._name.substring(0,1).charCodeAt();\n                                    \n                    if(value == 196){\n                        //对黑5\n                        return 16*Math.pow(10,4)+3;//比对红5大1\n                    }else if(value == 198){\n                        //对红5\n                        return 16*Math.pow(10,4)+2//比对鬼大1\n                    }\n                    \n                }else if(f == \"E\"){\n\n                    return 16*Math.pow(10,4)+1;//比四个3大1\n\n                }\n\n            }\n\n            //cc.log(\"weight:\"+weight);\n\n            return weight * Math.pow(10,arr.length);\n\n\n        }\n\n    },\n\n    /**\n     * 排序方法\n     */\n    sortPai:function(spriteArr){\n\n        //cc.log(spriteArr);\n\n        for(var i = 0;i<spriteArr.length;i++){\n\n            for(var j = i+1;j<spriteArr.length;j++){\n\n                var name1 = spriteArr[i]._name;\n\n                var name2 = spriteArr[j]._name;\n\n                //cc.log(name1.substring(1));\n\n                //cc.log(\"name1:\"+name1+\" name2:\"+name2);\n              \n                if(parseInt(name1.substring(1))>parseInt(name2.substring(1))){\n\n                    //cc.log(\"-name1:\"+name1+\" name2:\"+name2);\n\n                    var temp = spriteArr[i];\n\n                    spriteArr[i] = spriteArr[j];\n\n                    spriteArr[j] = temp;\n\n                }else if(name1.substring(1)==name2.substring(1)){\n\n                    var code1 = name1.substring(0,1).charCodeAt();\n                    var code2 = name2.substring(0,1).charCodeAt();\n\n                    //5的特殊排序\n                    if(name1.substring(1)==\"5\"){\n                        //把对黑5或对红5放到一起\n                        //把红桃与草花互换\n                        if(code1==99){\n\n                            code1 = 98;\n\n                        }else if(code1==98){\n\n                            code1 = 99;\n\n                        }\n\n                        if(code2==99){\n\n                            code2 = 98;\n\n                        }else if(code2==98){\n\n                            code2 = 99;\n\n                        }\n\n                    }\n\n                    if(code1>code2){\n\n                        var temp = spriteArr[i];\n\n                        spriteArr[i] = spriteArr[j];\n\n                        spriteArr[j] = temp;\n\n                    }\n\n                }\n            }\n            \n\n        }\n\n    },\n\n    /**\n     * 展示在牌桌上\n     */\n    showLastPai:function(){\n\n        // cc.log(\"player:\"+this._currentPlayer);\n\n        if(this._lastPai!=null && this._lastPai.length !=0){\n\n            var size = cc.winSize;\n\n            //展示\n            for(var j = 0;j<this._lastPai.length;j++){\n\n                var node = this._lastPai[j];\n\n                // cc.log(\"node:\");\n                // cc.log(node);\n\n                cc.director.getScene().addChild(node);\n\n                node.setPosition(cc.p(size.width/2 + j*30,size.height/2));\n\n            }\n\n        }\n\n    },\n\n    /**\n     * 清空牌桌\n     */\n    clearPaiZhuo:function(){\n\n        // cc.log(\"clearPaiZhuo\");\n\n        if(this._lastPai!=null && this._lastPai.length !=0){\n\n            for(var i = 0;i<this._lastPai.length;i++){\n\n                var node = this._lastPai[i];\n\n                // cc.log(node);\n\n                node.removeFromParent();\n\n                node.destroy();\n\n            }\n\n        }\n\n    },\n\n    /**\n     * 是否可以宣战或跟随\n     * 不可以 0\n     * 宣战 1\n     * 跟随 2\n     */\n    checkEnableXuanZhan:function(pNum){\n\n        if(pNum==null){\n\n            pNum = this._currentPlayer;\n\n        }\n\n        // cc.log(\"rounds:\"+this.rounds);\n        // cc.log(this.partyPlayers);\n        // cc.log(pNum);\n        // cc.log(this.partyPlayers.indexOf(pNum)!=-1);\n\n        if(this.rounds==1 && this.partyPlayers.indexOf(pNum)!=-1){\n\n            if(this.isXuanZhan){\n                //跟\n                return 2;\n            }else {\n                //宣战\n                return 1;\n\n            }\n\n        }else{\n\n            return 0;\n        }\n    },\n\n    /**\n     * 是否是同伙\n     */\n    isPlayerParty:function(pNum,pNum2){\n\n        return (pNum != pNum2) && ((this.partyPlayers.indexOf(pNum)==-1)^(this.partyPlayers.indexOf(pNum2)==-1));\n\n    },\n\n    /**\n     * 要风\n     */\n    getWind:function(){\n\n        for(var i = 0;i<this.playerNum;i++){\n\n            if(i!=this._currentPlayer && this.winPlayer.indexOf(i)==-1){\n\n                this.players.note.emit(\"GET_WIND\",{pNum:i,windPNum:this._currentPlayer});\n\n            }\n\n        }\n\n    },\n\n    /**\n     * 给风投票\n     */\n    agreeGetWind:function(isAgree){\n\n        this.voteGetWindNum = voteGetWindNum+1;\n\n        if((this.playerNum - this.winPlayer.length-1) == this.voteGetWindNum){\n\n\n\n        }\n\n    },\n\n    \n\n};\n"
  ]
}